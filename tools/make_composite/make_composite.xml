<tool id="create_composite_plot" name="Create Composite" version="1.0.0">
    <description> plot from tag pileup.</description>
    <requirements>
        <requirement type="package" version="1.0.0">scipy</requirement>
        <requirement type="package" version="2.1.0">matplotlib</requirement>
        <requirement type="package" version="0.22.0">pandas</requirement>
        <requirement type="package" version="2.7.14">python</requirement>
    </requirements>
    <command detect_errors="exit_code">
    <![CDATA[
    python $__tool_directory__/make_composite.py '$sample_cdt' '$control_cdt' '$composite_title' '$sample_color' '$control_color' '$background_color' '$center_line_color' '$dpi' '$ymaxtick'
    ]]>
    </command>

    <inputs>
      <param name="sample_cdt" type="data" format="tabular" label="Pileup Data for Sample" />
      <param name="control_cdt" type="data" format="tabular" label="Pileup Data for Control" />
      <param name="composite_title" type="text" value="" label="Title for the plot" />
      <param name="sample_color" type="text" value="" label="Sample Color" help="should be hexcode value without '#' ; example: C70039"/>
      <param name="control_color" type="text" value="" label="Control Color" help="should be hexcode value without '#' ; example: dc7633"/>
      <param name="background_color" type="text" value="" label="Background Color" help="should be hexcode value without '#' ; example: 212f3d"/>
      <param name="center_line_color" type="text" value="" label="Vertical Line Color" help="should be hexcode value without '#' ; example: 28de0f"/>
      <param name="dpi" type="integer" value="300" label="Dots per inch (DPI) for the image"/>
      <param name="ymaxtick" type="integer" value="5" label="Min-Max value to set the Y-axis upper limit"/>
    </inputs>

    <outputs>
      <data name="composite_plot_png" format="png" from_work_dir="Composite_plot.png"/>
    </outputs>

    <tests>
        <test>
            <param name="sample_cdt" ftype="tabular" value="composite_signal.tabular"/>
            <param name="control_cdt" ftype="tabular" value="composite_control.tabular"/>
            <param name="composite_title" value="sample"/>
            <param name="sample_color" value="C70039" />
            <param name="control_color" value="dc7633" />
            <param name="background_color" value="212f3d" />
            <param name="center_line_color" value="28de0f" />
            <param name="dpi" value="100" />
            <param name="ymaxtick" value="5" />
            <output name="composite_plot_png" file="sample_composite_plot.png" ftype="png" compare="sim_size"/>
        </test>
        <test>
            <param name="sample_cdt" ftype="tabular" value="composite_signal2.tabular"/>
            <param name="control_cdt" ftype="tabular" value="composite_control2.tabular"/>
            <param name="composite_title" value="sample"/>
            <param name="sample_color" value="C70039" />
            <param name="control_color" value="dc7633" />
            <param name="background_color" value="212f3d" />
            <param name="center_line_color" value="28de0f" />
            <param name="dpi" value="100" />
            <param name="ymaxtick" value="5" />
            <output name="composite_plot_png" file="sample_composite_plot2.png" ftype="png" compare="sim_size"/>
        </test>
    </tests>

    <help>
<![CDATA[
**What it does**

Generates a compostie plot from the Sample and Control CDT files generated by Tag Pileup.

]]>
    </help>
    <citations>
        <citation type="bibtex">
            @unpublished{None,
            author = {Kuntala, Prashant Kumar},
            title = {None},
            year = {None},
            eprint = {None},
            url = {http://www.pughlab.psu.edu/}
        }</citation>
    </citations>
</tool>
