<tool id="pick_features" name="Pick Features " version="1.0.0">
    <description> from reference bedfile </description>
    <requirements>
        <requirement type="package" version="2.7.14">python</requirement>
        <requirement type="package" version="0.22.0">pandas</requirement>
    </requirements>
    <command>
    <![CDATA[
    python $__tool_directory__/pickFeatures.py '$bedIntersectFile' '$refFeature'
    ]]>
    </command>

    <inputs>
      <param name="bedIntersectFile" type="data" format="bed" label="Bedtools intersect file between Sectors and peaks" help="Output from bedtools intersect using (-wa -u)" />
      <param name="refFeature" type="data" format="bed" label="Reference features in bedformat" help="Reference bedfile from which the regions will be picked" />
      <param name="customHistoryLabel" type="text" value="" label="Custom GALAXY history pane label" help=" Optional : replaces the default label given by GALAXY to this tool within current history with your custom label"/>
    </inputs>

    <outputs>
      <data name="outfile1" format="bed" from_work_dir="boundFeatures.bed" label="${customHistoryLabel.value} bound Features from ${on_string}"/>
      <data name="outfile2" format="tabular" from_work_dir="geneCounts.csv" label="${customHistoryLabel.value} bound Categories from ${on_string}"/>
    </outputs>

    <tests>
        <test>
            <param name="bedIntersectFile" ftype="bed" value="intersect.bed" />
            <param name="refFeature" ftype="bed" value="nfr.bed"  />
            <param name="customHistoryLabel" value="NFR"/>
            <output name="outfile1" file="boundFeatures.bed" ftype="bed" />
            <output name="outfile2" file="categories.csv" ftype="csv" />
        </test>        
    </tests>

    <help>

**What it does**

----

Program to pick the bound features (bed regions) from a reference feature bed file using the output from bedtools intersect (-u -wa) between SECTORS and multigpsPeaks.

``usage: pickFeatures.py [-h] bedIntersectFile refFeature``

``positional arguments:``
  -bedIntersectFile  bed file generated by Bedtools intersect using (-wa -u)
  -refFeature        Bed file to pick the regions based on the matches in
                    bedIntersectFile

``optional arguments:``
  -h, --help        show this help message and exit

    </help>

    <citations>
        <citation type="bibtex">
            @unpublished{None,
            author = {Kuntala, Prashant Kumar},
            title = {None},
            year = {None},
            eprint = {None},
            url = {http://www.pughlab.psu.edu/}
        }</citation>
    </citations>

</tool>
