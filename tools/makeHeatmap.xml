<tool id="make_heatmap" name="Create Heatmap" version="1.0.0">
    <description>from tagPileUp data matrix</description>
    <macros></macros>
    <requirements>
        <requirement type="package" version="1.14.2">numpy</requirement>
        <requirement type="package" version="2.1.0">matplotlib</requirement>
        <requirement type="package" version="2.7.14">python</requirement>
    </requirements>
    <command>
        <![CDATA[
      python $__tool_directory__/makeHeatmap.py '$inputTabular' '$thresholdFile' '$colors' '$rows' '$columns' '$ticks' '$dpi' '$xlabel' '$heatmapTitle' CDT_Heatmap.png
    ]]>
    </command>

    <inputs>
        <param name="inputTabular" type="data" format="tabular" label="CDT file to Plot"/>
        <param name="thresholdFile" type="data" format="txt" label="Threshold file" help="this file is generated by the calculateThreshold tool."/>
        <param name="colors" type="text" value="0,0,0" label="Plot color [ enter RGB values separated by comma -> example: 192,66,54 ]"/>
        <param name="rows" type="integer" value="700" label="The height of the heatmap. "/>
        <param name="columns" type="integer" value="300" label="The width of the heatmap."/>
        <param name="ticks" type="text" value="500" label="The x-axis labels that will be added" help="make sure your heatmap is a rectangular in dimensions."/>
        <param name="dpi" type="text" value="100" label="The pixels/dots per inch (DPI) for output image" help=" default: 100, max: 300 (general publication dpi)"/>
        <param name="xlabel" type="text" value="Distance from midpoint in bp" label="The label under x-axis" help=""/>
        <param name="heatmapTitle" type="text" value="All Features" label="Title for the Heatmap" help="Change the title based on NFR,TSS,CUT or others"/>
        <param name="customHistoryLabel" type="text" value="" label="Custom GALAXY history pane label" help=" Optional : replaces the default label given by GALAXY to this tool within current history with your custom label"/>

    </inputs>

    <outputs>
        <data name="out_file" format="png" from_work_dir="CDT_Heatmap.png" label="${customHistoryLabel} Heatmap from ${on_string}"/>
    </outputs>

    <tests>
        <test>
            <param name="inputTabular" value="sample.tabular" ftype="tabular"/>
            <param name="thresholdFile" value="calcThreshold_b.txt" ftype="txt"/>
            <param name="colors" value="0,0,0"/>
            <param name="rows" value="500"/>
            <param name="columns" value="300"/>
            <param name="ticks" value="500"/>
            <param name="dpi" value="100"/>
            <param name="xlabel" value="Distance from midpoint in bp"/>
            <param name="heatmapTitle" value="All Features"/>
            <param name="customHistoryLabel" value="sample"/>

            <output name="out_file" file="sample.png" ftype="png" compare="sim_size"/>
        </test>
    </tests>

    <help>

        **What it does** ---- Creates a heatmap (png) from tagPileUp CDT data matrix.
    </help>

    <citations>
        <citation type="bibtex">
            @unpublished{None, author = {Lai, William and Kuntala,Prashant Kumar}, title = {None}, year = {None}, eprint = {None}, url = {http://www.pughlab.psu.edu/} }
        </citation>
    </citations>

</tool>
